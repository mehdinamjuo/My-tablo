> Ù…Ù‡Ø¯ÛŒ Ù†Ø§Ù…Ø¬Ùˆ:
<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ù‚Ø§Ø¨ Ø¬Ø§Ø¯ÙˆÛŒÛŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- A-Frame & MindAR -->
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image.prod.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: sans-serif;
}

/* Ø¯Ú©Ù…Ù‡ Ø¶Ø¨Ø· */
#recordBtn {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: red;
  color: white;
  border: none;
  border-radius: 50px;
  padding: 14px 26px;
  font-size: 18px;
  z-index: 999;
}

/* Ø¯Ú©Ù…Ù‡ Ù…Ù†Ùˆ */
#menuBtn {
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 26px;
  background: rgba(0,0,0,0.6);
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 8px;
  z-index: 999;
}

/* Ù…Ù†ÙˆÛŒ Ú©Ø´ÙˆÛŒÛŒ */
#sideMenu {
  position: fixed;
  top: 0;
  right: -260px;
  width: 260px;
  height: 100%;
  background: #111;
  color: white;
  transition: 0.3s;
  z-index: 1000;
  padding-top: 60px;
}

#sideMenu a {
  display: block;
  padding: 15px 20px;
  color: white;
  text-decoration: none;
  border-bottom: 1px solid #333;
}

#sideMenu a:hover {
  background: #222;
}

input[type="file"] {
  display: none;
}
</style>
</head>

<body>

<!-- Ù…Ù†Ùˆ -->
<button id="menuBtn">â˜°</button>

<div id="sideMenu">
  <a href="#" onclick="uploadVideo()">ğŸ¥ Ø¢Ù¾Ù„ÙˆØ¯ ÙˆÛŒØ¯ÛŒÙˆ</a>
  <a href="#" onclick="uploadImage()">ğŸ–¼ï¸ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³</a>
  <a href="#">ğŸ› ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a>
  <a href="#">ğŸ“ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</a>
</div>

<!-- Ø¯Ú©Ù…Ù‡ Ø¶Ø¨Ø· -->
<button id="recordBtn">â— Ø¶Ø¨Ø·</button>

<!-- input Ù…Ø®ÙÛŒ -->
<input type="file" id="videoInput" accept="video/*">
<input type="file" id="imageInput" accept="image/*">

<!-- AR Scene -->
<a-scene
  mindar-image="
    imageTargetSrc: targets.mind;
    uiScanning: false;
    uiLoading: false;
    uiError: false;
    autoStart: true;
  "
  embedded
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
>

  <a-assets>
    <video id="arVideo" src="default.mp4" loop playsinline webkit-playsinline muted></video>
  </a-assets>

  <a-entity mindar-image-target="targetIndex: 0">
    <a-video src="#arVideo" width="1" height="0.6"></a-video>
  </a-entity>

  <a-camera look-controls="enabled:false"></a-camera>
</a-scene>

<script>
/* Ù…Ù†Ùˆ */
const menuBtn = document.getElementById("menuBtn");
const sideMenu = document.getElementById("sideMenu");

menuBtn.onclick = () => {
  sideMenu.style.right = sideMenu.style.right === "0px" ? "-260px" : "0px";
};

/* Ø¢Ù¾Ù„ÙˆØ¯ ÙˆÛŒØ¯ÛŒÙˆ */
function uploadVideo() {
  document.getElementById("videoInput").click();
}

document.getElementById("videoInput").onchange = e => {
  const file = e.target.files[0];
  if (!file) return;
  const url = URL.createObjectURL(file);
  const video = document.getElementById("arVideo");
  video.src = url;
  video.play();
};

/* Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ (ÙØ¹Ù„Ø§Ù‹ ÙÙ‚Ø· Ø¢Ù…Ø§Ø¯Ù‡) */
function uploadImage() {
  document.getElementById("imageInput").click();
}

/* Ø¶Ø¨Ø· ÙˆÛŒØ¯ÛŒÙˆ */
let mediaRecorder;
let chunks = [];
const recordBtn = document.getElementById("recordBtn");

recordBtn.onclick = () => {
  if (!mediaRecorder || mediaRecorder.state === "inactive") {
    const canvas = document.querySelector("a-scene").canvas;
    const stream = canvas.captureStream(30);

    mediaRecorder = new MediaRecorder(stream);
    chunks = [];

    mediaRecorder.ondataavailable = e => chunks.push(e.data);

    mediaRecorder.onstop = () => {
      const blob = new Blob(chunks, { type: "video/webm" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "magic-frame.webm";
      a.click();
      URL.revokeObjectURL(url);
    };

> Ù…Ù‡Ø¯ÛŒ Ù†Ø§Ù…Ø¬Ùˆ:
mediaRecorder.start();
    recordBtn.innerText = "â–  ØªÙˆÙ‚Ù";
    recordBtn.style.background = "black";
  } else {
    mediaRecorder.stop();
    recordBtn.innerText = "â— Ø¶Ø¨Ø·";
    recordBtn.style.background = "red";
  }
};
</script>

</body>
</html>
