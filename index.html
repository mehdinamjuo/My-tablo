<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ù‚Ø§Ø¨ Ø¬Ø§Ø¯ÙˆÛŒÛŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<!-- A-Frame + MindAR -->
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image.prod.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: black;
}

/* AR ØªÙ…Ø§Ù… ØµÙØ­Ù‡ */
a-scene {
  position: fixed;
  inset: 0;
}

/* Ù…Ù†ÙˆÛŒ Ú©Ù†Ø§Ø±ÛŒ (Ø§ÙˆÙ„ Ù…Ø®ÙÛŒ) */
#sideMenu {
  position: fixed;
  top: 0;
  right: -100%;
  width: 70%;
  height: 100%;
  background: rgba(0,0,0,0.95);
  transition: 0.3s;
  z-index: 9998;
  padding-top: 80px;
  display: none;  /* Ø§ÙˆÙ„ Ù…Ø®ÙÛŒ */
}

#sideMenu a {
  display: block;
  padding: 18px 24px;
  font-size: 18px;
  color: white;
  text-decoration: none;
  border-bottom: 1px solid #333;
}

/* Ø¯Ú©Ù…Ù‡ Ù…Ù†Ùˆ (Ø§ÙˆÙ„ Ù…Ø®ÙÛŒ) */
#menuBtn {
  position: fixed;
  top: 18px;
  right: 18px;
  background: rgba(0,0,0,0.55);
  color: white;
  border: none;
  font-size: 26px;
  padding: 10px 14px;
  border-radius: 10px;
  z-index: 9999;
  display: none;  /* Ø§ÙˆÙ„ Ù…Ø®ÙÛŒ */
}

input { display: none; }
</style>
</head>

<body>

<!-- Ø¯Ú©Ù…Ù‡ Ù…Ù†Ùˆ (Ø¨Ø¯ÙˆÙ† Ø¶Ø¨Ø·) -->
<button id="menuBtn">â˜°</button>

<div id="sideMenu">
  <a href="#" onclick="pickVideo()">ğŸ¥ ØªØºÛŒÛŒØ± ÙˆÛŒØ¯ÛŒÙˆ</a>
  <a href="#">ğŸ–¼ï¸ ØªØºÛŒÛŒØ± Ø¹Ú©Ø³</a>
  <a href="#">ğŸ› ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a>
  <a href="#">ğŸ“ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</a>
</div>

<input type="file" id="videoInput" accept="video/*">

<!-- AR -->
<a-scene
  mindar-image="
    imageTargetSrc: targets.mind;
    uiScanning: false;
    uiLoading: false;
    uiError: false;
    autoStart: true;
  "
  embedded
  vr-mode-ui="enabled:false"
  device-orientation-permission-ui="enabled:false"
>

<a-assets>
  <video id="arVideo" src="default.mp4" loop muted playsinline></video>
</a-assets>

<a-entity mindar-image-target="targetIndex:0">
  <a-video src="#arVideo" width="1" height="0.6"></a-video>
</a-entity>

<a-camera look-controls="enabled:false"></a-camera>
</a-scene>

<script>
/* ØµØ¨Ø± Ø¨Ø±Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯Ù† Ø¯ÙˆØ±Ø¨ÛŒÙ† */
document.addEventListener("DOMContentLoaded", () => {
  const sceneEl = document.querySelector("a-scene");

  sceneEl.addEventListener("arReady", () => {
    // Ø¯Ú©Ù…Ù‡ Ù…Ù†Ùˆ Ùˆ Ù…Ù†Ùˆ Ø±Ùˆ Ø¸Ø§Ù‡Ø± Ú©Ù†
    const menuBtn = document.getElementById("menuBtn");
    const sideMenu = document.getElementById("sideMenu");

    menuBtn.style.display = "block";
    sideMenu.style.display = "block";

    // Ø§ÙÚ©Øª fade-in
    menuBtn.style.opacity = "0";
    sideMenu.style.opacity = "0";
    menuBtn.style.transition = "opacity 0.4s";
    sideMenu.style.transition = "opacity 0.4s";
    setTimeout(() => {
      menuBtn.style.opacity = "1";
      sideMenu.style.opacity = "1";
    }, 50);
  });
});

/* Ù…Ù†Ùˆ */
const menuBtn = document.getElementById("menuBtn");
const sideMenu = document.getElementById("sideMenu");
menuBtn.onclick = () => {
  sideMenu.style.right = sideMenu.style.right === "0px" ? "-100%" : "0px";
};

/* ØªØºÛŒÛŒØ± ÙˆÛŒØ¯ÛŒÙˆ */
function pickVideo() {
  videoInput.click();
}
videoInput.onchange = e => {
  const file = e.target.files[0];
  if (!file) return;
  const video = document.getElementById("arVideo");
  video.src = URL.createObjectURL(file);
  video.play();
};

</script>

</body>
</html>
